<div class="app-container">
  <div class="app-header">
    <p-button 
      type="button" 
      icon="pi pi-bars" 
      (click)="toggleSidebar()" 
      [text]="true"
      aria-label="Seitenleiste ein-/ausblenden">
    </p-button>
    <h2>{{ title() }}</h2>
    <div class="header-spacer"></div>
    <app-sync-indicator></app-sync-indicator>
    <app-save-button></app-save-button>
    <app-header-user-selector></app-header-user-selector>
    <app-theme-toggle></app-theme-toggle>
  </div>

  <div class="app-body">
    @if (sidebarVisible()) {
      <aside class="app-sidebar">
        @if (!isConnected()) {
          <div class="sidebar-info">
            <i class="pi pi-info-circle"></i>
            <span>Verzeichnis verbinden um alle Funktionen zu nutzen</span>
          </div>
        }
        <nav class="sidebar-nav" role="navigation" aria-label="Hauptnavigation">
          @for (item of menuItems(); track item.id) {
            <a 
              class="nav-item"
              [class.nav-item-disabled]="item.disabled"
              [class.nav-item-active]="isActiveRoute(item.route || '')"
              [attr.aria-current]="isActiveRoute(item.route || '') ? 'page' : null"
              [attr.aria-disabled]="item.disabled"
              [pTooltip]="item.disabled ? 'Verzeichnis verbinden um diese Funktion zu nutzen' : ''"
              tooltipPosition="right"
              (click)="onNavigate(item)">
              <i [class]="item.icon"></i>
              <span class="nav-item-label">{{ item.label }}</span>
              @if (item.disabled) {
                <i class="pi pi-lock nav-item-lock"></i>
              }
            </a>
          }
        </nav>
      </aside>
    }
    
    <main class="app-content">
      <router-outlet></router-outlet>
    </main>
  </div>

  <app-status-bar></app-status-bar>
  <app-user-selector-dialog></app-user-selector-dialog>
  
  <p-toast></p-toast>
  <p-confirmDialog></p-confirmDialog>
</div>
